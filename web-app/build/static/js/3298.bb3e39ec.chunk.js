"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3298],{43298:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var s=n(65043),a=n(73216),i=n(89923),l=n(77403),r=n(77938),c=n(99161),o=n(64159),d=n(21383),u=n(22166),h=n(46537),x=n(48793),m=n(56629),g=n(53518),p=n(69772),b=n(6681),j=n(64681),k=n(29977),v=n(18218),C=n(33097),S=n.n(C),f=n(94574),y=n(35475),A=n(56483),_=n(80882),B=n(70579);const T=f.Ay.div((e=>{let{theme:t}=e;return{border:`${S()(t,"borderColor","#eaeaea")} 1px solid`,borderRadius:3,padding:15,cursor:"pointer","&.disabled":{backgroundColor:S()(t,"signalColors.danger","red")},"&:hover":{backgroundColor:S()(t,"boxBackground","#FBFAFA")},"& .bucketTitle":{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:10,"& h1":{padding:0,margin:0,marginBottom:5,fontSize:22,color:S()(t,"screenTitle.iconColor","#07193E"),[`@media (max-width: ${i.nmC.md}px)`]:{marginBottom:0}}},"& .bucketDetails":{display:"flex",gap:40,"& span":{fontSize:14},[`@media (max-width: ${i.nmC.md}px)`]:{flexFlow:"column-reverse",gap:5}},"& .bucketMetrics":{display:"flex",alignItems:"center",marginTop:20,gap:25,borderTop:`${S()(t,"borderColor","#E2E2E2")} 1px solid`,paddingTop:20,"& svg.bucketIcon":{color:S()(t,"screenTitle.iconColor","#07193E"),fill:S()(t,"screenTitle.iconColor","#07193E")},"& .metric":{"& .min-icon":{color:S()(t,"fontColor","#000"),width:13,marginRight:5}},"& .metricLabel":{fontSize:14,fontWeight:"bold",color:S()(t,"fontColor","#000")},"& .metricText":{fontSize:24,fontWeight:"bold"},"& .unit":{fontSize:12,fontWeight:"normal"},[`@media (max-width: ${i.nmC.md}px)`]:{marginTop:8,paddingTop:8}}}})),w=e=>{var t,n;let{bucket:l,onSelect:o,selected:d,bulkSelect:u}=e;const h=(0,a.Zp)(),[x,m]=(0,s.useState)(!1),g=(0,A.nO)(`${l.size}`||"0"),p=g.split(" ")[0],b=g.split(" ")[1],j=S()(l,"details.quota.quota","0"),k=(0,A.GT)(j,!0,!1),v=(0,r._)(l.name,c.pC[c.ac.BUCKET_ADMIN])&&!1;return(0,B.jsxs)(T,{onClick:()=>{!x&&h(`/buckets/${l.name}/admin`)},id:`manageBucket-${l.name}`,className:"bucket-item "+(v?"disabled":""),children:[(0,B.jsxs)(i.azJ,{className:"bucketTitle",children:[u&&(0,B.jsx)(i.azJ,{onClick:e=>{e.stopPropagation()},children:(0,B.jsx)(i.Sc0,{checked:d,id:`select-${l.name}`,label:"",name:`select-${l.name}`,onChange:e=>{o(e)},value:l.name})}),(0,B.jsxs)("h1",{children:[l.name," ",v]})]}),(0,B.jsxs)(i.azJ,{className:"bucketDetails",children:[(0,B.jsxs)("span",{id:`created-${l.name}`,children:[(0,B.jsx)("strong",{children:"Created:"})," ",l.creation_date?new Date(l.creation_date).toString():"n/a"]}),(0,B.jsxs)("span",{id:`access-${l.name}`,children:[(0,B.jsx)("strong",{children:"Access:"})," ",(e=>{var t,n,s,a,i,l;return null===(t=e.rw_access)||void 0===t||!t.read||null!==(n=e.rw_access)&&void 0!==n&&n.write?null!==(s=e.rw_access)&&void 0!==s&&s.read||null===(a=e.rw_access)||void 0===a||!a.write?null!==(i=e.rw_access)&&void 0!==i&&i.read&&null!==(l=e.rw_access)&&void 0!==l&&l.write?"R/W":"":"W":"R"})(l)]})]}),(0,B.jsxs)(i.azJ,{className:"bucketMetrics",children:[(0,B.jsx)(y.N_,{to:`/buckets/${l.name}/admin`,children:(0,B.jsx)(i.brV,{className:"bucketIcon",style:{height:48,width:48}})}),(0,B.jsxs)(i.xA9,{item:!0,className:"metric",onMouseEnter:()=>{var e;return(null===(e=l.details)||void 0===e?void 0:e.versioning)&&m(!0)},onMouseLeave:()=>{var e;return(null===(e=l.details)||void 0===e?void 0:e.versioning)&&m(!1)},children:[(null===(t=l.details)||void 0===t?void 0:t.versioning)&&(0,B.jsxs)(i.V7x,{content:_.p,placement:"top",children:[(0,B.jsx)(i.wNL,{})," "]}),!(null!==(n=l.details)&&void 0!==n&&n.versioning)&&(0,B.jsx)(i.wNL,{}),(0,B.jsx)("span",{className:"metricLabel",children:"Usage"}),(0,B.jsxs)("div",{className:"metricText",children:[p,(0,B.jsx)("span",{className:"unit",children:b}),"0"!==j&&(0,B.jsxs)(s.Fragment,{children:[" ","/ ",k.total,(0,B.jsx)("span",{className:"unit",children:k.unit})]})]})]}),(0,B.jsxs)(i.xA9,{item:!0,className:"metric",children:[(0,B.jsx)(i.Sxe,{}),(0,B.jsx)("span",{className:"metricLabel",children:"Objects"}),(0,B.jsx)("div",{className:"metricText",children:l.objects?(0,A.Af)(l.objects):0})]})]})]})};var E=n(94141),R=n(23758);const L=e=>{let{open:t,closeModalAndRefresh:n,buckets:a}=e;const l=(0,d.jL)(),[r,c]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[k,v]=(0,s.useState)(""),[C,f]=(0,s.useState)(""),[y,_]=(0,s.useState)(""),[T,w]=(0,s.useState)(!0),[L,$]=(0,s.useState)("async"),[N,F]=(0,s.useState)("100"),[U,z]=(0,s.useState)("Gi"),[K,M]=(0,s.useState)("60"),[I,O]=(0,s.useState)([]),[V,D]=(0,s.useState)([]),[J,P]=(0,s.useState)([]),W=V.map((e=>({label:e,value:e})));(0,s.useEffect)((()=>{if(0===I.length){const e=[],t=[];a.forEach((n=>{e.push(n),t.push("")})),O(t),c(e)}}),[a,I.length]);const q=e=>{let{errString:t}=e;switch(t){case"":return(0,B.jsx)(i.azJ,{sx:{color:"#42C91A"},children:(0,B.jsx)(i.C1y,{})});case"n/a":return null;default:if(t)return(0,B.jsx)(i.azJ,{sx:{color:"#C72C48"},children:(0,B.jsx)(i.m_M,{tooltip:t,placement:"top",children:(0,B.jsx)(i.cJw,{})})})}return null},Z=(e,t)=>{const n=[...I];n[e]=t,O(n)},G=e=>{let t=[...r],n=[...I];null===e||void 0===e||e.forEach((e=>{const s=S()(e,"errorString","");if(!s||""===s){const s=t.indexOf(e.originBucket||"");t.splice(s,1),n.splice(s,1)}})),c(t),O(n)};return(0,B.jsx)(E.A,{modalOpen:t,onClose:()=>{n(!1)},title:"Set Multiple Bucket Replication",children:(0,B.jsx)(i.sQ4,{loadingStep:u||x,wizardSteps:[{label:"Remote Configuration",componentRender:(0,B.jsx)(s.Fragment,{children:(0,B.jsxs)(i.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,B.jsx)(i.EmB,{label:"Local Buckets to replicate",sx:{maxWidth:"440px",width:"100%"},children:r.join(", ")}),(0,B.jsx)("h4",{children:"Remote Endpoint Configuration"}),(0,B.jsxs)("span",{style:{fontSize:14},children:["Please avoid the use of root credentials for this feature",(0,B.jsx)("br",{}),(0,B.jsx)("br",{})]}),(0,B.jsx)(i.cl_,{id:"accessKey",name:"accessKey",onChange:e=>{j(e.target.value)},label:"Access Key",value:b}),(0,B.jsx)(i.cl_,{id:"secretKey",name:"secretKey",onChange:e=>{v(e.target.value)},label:"Secret Key",value:k}),(0,B.jsx)(i.cl_,{id:"targetURL",name:"targetURL",onChange:e=>{f(e.target.value)},placeholder:"play.min.io:9000",label:"Target URL",value:C}),(0,B.jsx)(i.dOG,{checked:T,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:e=>{w(e.target.checked)},value:"yes"}),(0,B.jsx)(i.cl_,{id:"region",name:"region",onChange:e=>{_(e.target.value)},label:"Region",value:y}),(0,B.jsx)(i.l6P,{id:"replication_mode",name:"replication_mode",onChange:e=>{$(e)},label:"Replication Mode",value:L,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]}),"async"===L&&(0,B.jsx)(i.cl_,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:e=>{e.target.validity.valid&&F(e.target.value)},label:"Bandwidth",value:N,min:"0",pattern:"[0-9]*",overlayObject:(0,B.jsx)(R.A,{id:"quota_unit",onUnitChange:e=>{z(e)},unitSelected:U,unitsList:(0,A.l9)(["Ki"]),disabled:!1})}),(0,B.jsx)(i.cl_,{id:"healthCheck",name:"healthCheck",onChange:e=>{M(e.target.value)},label:"Health Check Duration",value:K})]})}),buttons:[{type:"custom",label:"Next",enabled:!x,action:e=>{const t={accessKey:b,secretKey:k,targetURL:C,useTLS:T};p(!0),m.F.listExternalBuckets.listExternalBuckets(t).then((t=>{const n=S()(t.data,"buckets",[]);if(n&&n.length>0){const e=n.map((e=>e.name));D(e)}e("++"),p(!1)})).catch((e=>{p(!1),l((0,o.Dy)((0,g.S)(e.error)))}))}}]},{label:"Bucket Assignments",componentRender:(0,B.jsxs)(s.Fragment,{children:[(0,B.jsx)("h3",{children:"Remote Bucket Assignments"}),(0,B.jsx)("span",{style:{fontSize:14},children:"Please select / type the desired remote bucket were you want the local data to be replicated."}),(0,B.jsx)(i.azJ,{sx:{display:"grid",gridTemplateColumns:"auto auto 45px",alignItems:"center",justifyContent:"stretch","& .hide":{opacity:0,transitionDuration:"0.3s"}},children:r.map(((e,t)=>{const n=(e=>{if(J&&J.length>0){const t=J.find((t=>t.originBucket===e));if(t){return S()(t,"errorString","")||""}}return"n/a"})(e);return(0,B.jsxs)(s.Fragment,{children:[(0,B.jsx)("div",{className:""===n?"hide":"",children:e}),(0,B.jsx)("div",{className:""===n?"hide":"",children:(a=t,V.length>0?(0,B.jsx)(s.Fragment,{children:(0,B.jsx)(i.l6P,{label:"",id:`assign-bucket-${a}`,name:`assign-bucket-${a}`,value:I[a],onChange:e=>{Z(a,e)},options:W,disabled:u})}):(0,B.jsx)(s.Fragment,{children:(0,B.jsx)(i.cl_,{id:`assign-bucket-${a}`,name:`assign-bucket-${a}`,label:"",onChange:e=>{Z(a,e.target.value)},value:I[a],disabled:u})}))}),(0,B.jsx)("div",{className:""===n?"hide":"",children:J&&J.length>0&&(0,B.jsx)(q,{errString:n})})]},`buckets-assignation-${t.toString()}-${e}`);var a}))})]}),buttons:[{type:"back",label:"Back",enabled:!0},{type:"next",label:"Create",enabled:!u,action:()=>{h(!0);const e=r.map(((e,t)=>({originBucket:e,destinationBucket:I[t]}))),t=`${T?"https://":"http://"}${C}`,s=parseInt(K),a={accessKey:b,secretKey:k,targetURL:t,region:y,bucketsRelation:e,syncMode:L,bandwidth:"async"===L?parseInt((0,A.q5)(N,U,!0)):0,healthCheckPeriod:s};m.F.bucketsReplication.setMultiBucketReplication(a).then((e=>{h(!1);const t=e.data.replicationState;P(t);const s=null===t||void 0===t?void 0:t.filter((e=>e.errorString&&""!==e.errorString));0===(null===s||void 0===s?void 0:s.length)?n(!0):setTimeout((()=>{G(t)}),500)})).catch((e=>{h(!1),l((0,o.Dy)((0,g.S)(e.error)))}))}}]}],forModal:!0})})},$=()=>{const e=(0,d.jL)(),t=(0,a.Zp)(),[n,C]=(0,s.useState)([]),[S,f]=(0,s.useState)(!0),[y,A]=(0,s.useState)(""),[_,T]=(0,s.useState)([]),[E,R]=(0,s.useState)(!1),[$,N]=(0,s.useState)(!1),F=(0,u.d4)(h.s$),U=!(null===F||void 0===F||!F.includes("object-browser-only"));(0,s.useEffect)((()=>{e((0,o.ph)("ob_bucket_list"))}),[e]),(0,s.useEffect)((()=>{if(S){(()=>{f(!0),m.F.buckets.listBuckets().then((t=>{t.data?(f(!1),C(t.data.buckets||[])):t.error&&(f(!1),e((0,o.C9)((0,g.S)(t.error))))}))})()}}),[S,e]);const z=n.filter((e=>""===y||e.name.indexOf(y)>=0)),K=n.length>0,M=e=>{const t=e.target,n=t.value,s=t.checked;let a=[..._];return s?a.push(n):a=a.filter((e=>e!==n)),T(a),a},I=(0,v.A)("*",[c.OV.S3_CREATE_BUCKET]),O=(0,v.A)("*",[c.OV.S3_LIST_BUCKET,c.OV.S3_ALL_LIST_BUCKET]);return(0,B.jsxs)(s.Fragment,{children:[E&&(0,B.jsx)(L,{open:E,buckets:_,closeModalAndRefresh:e=>{R(!1),e&&T([])}}),!U&&(0,B.jsx)(x.A,{label:"Buckets",actions:(0,B.jsx)(B.Fragment,{})}),(0,B.jsxs)(i.Mxu,{children:[(0,B.jsxs)(i.xA9,{item:!0,xs:12,sx:l._0.actionsTray,children:[U&&(0,B.jsx)(i.xA9,{item:!0,xs:!0,children:(0,B.jsx)(p.A,{marginRight:15,marginTop:10})}),K&&(0,B.jsx)(j.A,{onChange:A,placeholder:"Search Buckets",value:y,sx:{minWidth:380,[`@media (max-width: ${i.nmC.md}px)`]:{minWidth:220}}}),(0,B.jsxs)(i.xA9,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:5},children:[!U&&(0,B.jsxs)(s.Fragment,{children:[(0,B.jsx)(b.A,{tooltip:K?$?"Unselect Buckets":"Select Multiple Buckets":"",children:(0,B.jsx)(i.$nd,{id:"multiple-bucket-seection",onClick:()=>{N(!$),T([])},icon:(0,B.jsx)(i.IN,{}),variant:$?"callAction":"regular",disabled:!K})}),$&&(0,B.jsx)(b.A,{tooltip:K?_.length===z.length?"Unselect All Buckets":"Select All Buckets":"",children:(0,B.jsx)(i.$nd,{id:"select-all-buckets",onClick:()=>{if(_.length===z.length)return void T([]);const e=z.map((e=>e.name));T(e)},icon:(0,B.jsx)(i.nhX,{}),variant:"regular"})}),(0,B.jsx)(b.A,{tooltip:K?0===_.length?$?"Please select at least one bucket on which to configure Replication":"Use the Select Multiple Buckets button to choose buckets on which to configure Replication":"Set Replication":"",children:(0,B.jsx)(i.$nd,{id:"set-replication",onClick:()=>{R(!0)},icon:(0,B.jsx)(i.hwo,{}),variant:"regular",disabled:0===_.length})})]}),(0,B.jsx)(b.A,{tooltip:"Refresh",children:(0,B.jsx)(i.$nd,{id:"refresh-buckets",onClick:()=>{f(!0)},icon:(0,B.jsx)(i.fNY,{}),variant:"regular"})}),!U&&(0,B.jsx)(b.A,{tooltip:I?"":(0,c.vj)([c.OV.S3_CREATE_BUCKET],"create a bucket"),children:(0,B.jsx)(i.$nd,{id:"create-bucket",onClick:()=>{t(c.zZ.ADD_BUCKETS)},icon:(0,B.jsx)(i.REV,{}),variant:"callAction",disabled:!I,label:"Create Bucket"})})]})]}),S&&(0,B.jsx)(i.z21,{}),!S&&(0,B.jsxs)(i.xA9,{item:!0,xs:12,sx:{marginTop:25,height:"calc(100vh - 211px)","&.isEmbedded":{height:"calc(100vh - 128px)"}},className:U?"isEmbedded":"",children:[0!==z.length&&(0,B.jsx)(k.A,{rowRenderFunction:e=>{const t=z[e]||null;return t?(0,B.jsx)(w,{bucket:t,onSelect:M,selected:_.includes(t.name),bulkSelect:$}):null},totalItems:z.length}),0===z.length&&""!==y&&(0,B.jsx)(i.xA9,{container:!0,children:(0,B.jsx)(i.xA9,{item:!0,xs:8,children:(0,B.jsx)(i.lVp,{iconComponent:(0,B.jsx)(i.brV,{}),title:"No Results",help:(0,B.jsx)(s.Fragment,{children:"No buckets match the filtering condition"})})})}),!K&&(0,B.jsx)(i.xA9,{container:!0,children:(0,B.jsx)(i.xA9,{item:!0,xs:8,children:(0,B.jsx)(i.lVp,{iconComponent:(0,B.jsx)(i.brV,{}),title:"Buckets",help:(0,B.jsxs)(s.Fragment,{children:["Tpstreams Storage uses buckets to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,B.jsx)("br",{}),O?"":(0,B.jsxs)(s.Fragment,{children:[(0,B.jsx)("br",{}),(0,c.vj)([c.OV.S3_LIST_BUCKET,c.OV.S3_ALL_LIST_BUCKET],"view the buckets on this server"),(0,B.jsx)("br",{})]}),(0,B.jsxs)(r.R,{scopes:[c.OV.S3_CREATE_BUCKET],resource:c.Ms,children:[(0,B.jsx)("br",{}),"To get started,\xa0",(0,B.jsx)(i.t53,{onClick:()=>{t(c.zZ.ADD_BUCKETS)},children:"Create a Bucket."})]})]})})})})]})]})]})}},23758:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(65043),a=n(89923),i=n(94574),l=n(33097),r=n.n(l),c=n(70579);const o=i.Ay.button((e=>{let{theme:t}=e;return{border:`1px solid ${r()(t,"borderColor","#E2E2E2")}`,borderRadius:3,color:r()(t,"secondaryText","#5B5C5C"),backgroundColor:r()(t,"boxBackground","#FBFAFA"),fontSize:12}})),d=e=>{let{id:t,unitSelected:n,unitsList:i,disabled:l=!1,onUnitChange:r}=e;const[d,u]=s.useState(null),h=Boolean(d),x=e=>{u(null),""!==e&&r&&r(e)};return(0,c.jsxs)(s.Fragment,{children:[(0,c.jsx)(o,{id:`${t}-button`,"aria-controls":`${t}-menu`,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:e=>{u(e.currentTarget)},disabled:l,type:"button",children:n}),(0,c.jsx)(a.Vey,{id:"upload-main-menu",options:i,selectedOption:"",onSelect:e=>x(e),hideTriggerAction:()=>{x("")},open:h,anchorEl:d,anchorOrigin:"end"})]})}},94141:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(65043),a=n(22166),i=n(89923),l=n(21383),r=n(64159),c=n(49555),o=n(70579);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:u,wideLimit:h=!0,titleIcon:x=null,iconColor:m="default",sx:g}=e;const p=(0,l.jL)(),[b,j]=(0,s.useState)(!1),k=(0,a.d4)((e=>e.system.modalSnackBar));(0,s.useEffect)((()=>{p((0,r.h0)(""))}),[p]),(0,s.useEffect)((()=>{if(k){if(""===k.message)return void j(!1);"error"!==k.type&&j(!0)}}),[k]);let v="";return k&&(v=k.detailedErrorMsg,(""===v||v&&v.length<5)&&(v=k.message)),(0,o.jsxs)(i.ngX,{onClose:t,open:n,title:d,titleIcon:x,widthLimit:h,sx:g,iconColor:m,children:[(0,o.jsx)(c.A,{isModal:!0}),(0,o.jsx)(i.qb_,{onClose:()=>{j(!1),p((0,r.h0)(""))},open:b,message:v,mode:"inline",variant:"error"===k.type?"error":"default",autoHideDuration:"error"===k.type?10:5,condensed:!0}),u]})}}}]);
//# sourceMappingURL=3298.bb3e39ec.chunk.js.map